# Development Backend Dockerfile with hot-reload
FROM node:24-alpine

WORKDIR /app

# Install dependencies for development
RUN apk add --no-cache python3 make g++

# Copy package files
COPY package*.json ./
COPY packages/backend/package*.json ./packages/backend/

# Install all dependencies (including dev)
RUN npm ci --workspace=packages/backend

# Copy source code (will be overridden by volume mount)
COPY packages/backend ./packages/backend

WORKDIR /app/packages/backend

EXPOSE 3001

# Run with nodemon for hot-reload
CMD ["npm", "run", "dev"]
